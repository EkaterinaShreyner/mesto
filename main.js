(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},t=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),n=document.querySelector(".profile__pen"),o=document.forms["form-edit-profile"],i=(document.forms["form-cards"],document.forms["form-avatar"]),u=o.querySelector(".popup__input_type_name"),c=o.querySelector(".popup__input_type_info");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}i.querySelector(".popup__input_type_avatar-link");var s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._formSelector=t.formSelector,this._errorClass=t.errorClass,this._form=document.forms[r],this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButtonSelector=this._form.querySelector(t.submitButtonSelector)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_showInputError",value:function(e,t){var r=this._form.querySelector(".".concat(e.id,"-error"));r.textContent=t,r.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListener",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValid(t),e._toggleButtonState()}))}))}},{key:"_activeSubmitButton",value:function(){this._submitButtonSelector.classList.remove(this._inactiveButtonClass),this._submitButtonSelector.disabled=!1}},{key:"disableSubmitButton",value:function(){this._submitButtonSelector.classList.add(this._inactiveButtonClass),this._submitButtonSelector.disabled=!0}},{key:"_hasInputInvalid",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInputInvalid()?this.disableSubmitButton():this._activeSubmitButton()}}])&&l(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var h=function(){function e(t,r,n,o){var i,u,c,a=this,l=o.handleCardClick,s=o.handleDeleteCard,f=o.handleLikeButton;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,c=function(){a._cardLikeButton.addEventListener("click",(function(){a._handleLikeButton(a)})),a._cardElementDelete.addEventListener("click",(function(){a._handleDeleteCard()})),a._cardImage.addEventListener("click",(function(){a._handleCardClick()}))},(u=y(u="_setEventListeners"))in i?Object.defineProperty(i,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[u]=c,this._name=t.name,this._link=t.link,this.cardId=t._id,this._likes=t.likes,this._ownerId=t.owner._id,this._userId=n,this._templateSelector=r,this._handleCardClick=l,this._handleDeleteCard=s,this._handleLikeButton=f}var t,r;return t=e,(r=[{key:"_getTemplateCard",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCard",value:function(){return this._item=this._getTemplateCard(),this._cardImage=this._item.querySelector(".element__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._item.querySelector(".element__title").textContent=this._name,this._cardLikeButton=this._item.querySelector(".element__like"),this._cardElementDelete=this._item.querySelector(".element__card-delete"),this._cardLikes=this._item.querySelector(".element__likes"),this._cardLikes.textContent=this._likes.length,this._ownerId!=this._userId&&this._cardElementDelete.remove(),this.checkUserLike()?this.like():this.removeLike(),this._setEventListeners(),this._item}},{key:"checkUserLike",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"sumLikes",value:function(e){this._cardLikes.textContent=e.likes.length,this._likes=e.likes}},{key:"like",value:function(){this._cardLikeButton.classList.add("element__like_active",!0)}},{key:"removeLike",value:function(){this._cardLikeButton.classList.remove("element__like_active",!0)}},{key:"deleteCard",value:function(){this._item.remove()}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}var v=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t.addItem(e)}))}},{key:"addItem",value:function(e){this._container.append(this._renderer(e))}},{key:"addNewItem",value:function(e){this._container.prepend(this._renderer(e))}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}var S=function(){function e(t){var r=t.nameProfileSelector,n=t.infoProfileSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameTitle=document.querySelector(r),this._userProfileSubtitle=document.querySelector(n),this._userAvatar=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{name:this._userNameTitle.textContent,about:this._userProfileSubtitle.textContent}}},{key:"setUserInfo",value:function(e){this._userNameTitle.textContent=e.name,this._userProfileSubtitle.textContent=e.about,this._userAvatar.src=e.avatar}}])&&_(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function w(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===g(t)?t:String(t)}const O=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_handleEscClose",(function(e){"Escape"===e.key&&r.close()})),w(this,"_handleOverlayClose",(function(e){e.target.classList.contains("popup_opened")&&r.close()})),this._popup=document.querySelector(t),this._popupCloseButton=this._popup.querySelector(".popup__button-close")}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",this._handleOverlayClose)}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===j(o)?o:String(o)),n)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},L.apply(this,arguments)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(n);if(o){var r=I(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._popupForm=r._popup.querySelector(".popup__form"),r._inputList=Array.from(r._popupForm.querySelectorAll(".popup__input")),r._buttonSubmit=r._popup.querySelector(".popup__button"),r._handleFormSubmit=t,r}return t=u,(r=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"renderLoading",value:function(e){this._buttonSubmit.textContent=e?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var e=this;L(I(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){L(I(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&P(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(O);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===B(o)?o:String(o)),n)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},q.apply(this,arguments)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(n);if(o){var r=D(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imageFull=t._popup.querySelector(".popup__image-full"),t._headingFull=t._popup.querySelector(".popup__title_image-full"),t}return t=u,(r=[{key:"open",value:function(e){q(D(u.prototype),"open",this).call(this),this._imageFull.src=e.link,this._imageFull.alt=e.name,this._headingFull.textContent=e.name}}])&&R(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(O);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===F(o)?o:String(o)),n)}var o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},N.apply(this,arguments)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(n);if(o){var r=J(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._popupForm=r._popup.querySelector(".popup__form"),r._handleFormSubmit=t,r}return t=u,(r=[{key:"open",value:function(e){N(J(u.prototype),"open",this).call(this),this._card=e}},{key:"setEventListeners",value:function(){var e=this;N(J(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._card)}))}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(O);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===H(o)?o:String(o)),n)}var o}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $,K=new(function(){function e(t){var r=t.url,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=r,this._headers=n}var t,r;return t=e,(r=[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("Что-то пошло не так: ".concat(e.status))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._getResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._getResponse)}},{key:"patchUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._getResponse)}},{key:"postNewCard",value:function(e){var t=e.name,r=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._getResponse)}},{key:"patchAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._getResponse)}},{key:"putLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._getResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponse)}}])&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://nomoreparties.co/v1/cohort-65",headers:{authorization:"eb88a784-5abe-4513-8117-377adafa9ddc","Content-Type":"application/json"}});Promise.all([K.getUserInfo(),K.getCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];$=o._id,W.setUserInfo(o),Q.renderItems(i),console.log(o._id,i)})).catch((function(e){console.error("Ошибка ".concat(e))}));var Q=new v({renderer:function(e){return function(e){var t=new h(e,".cards",$,{handleCardClick:function(){Z.open(e)},handleDeleteCard:function(){console.log(t),te.open(t)},handleLikeButton:function(e){console.log(e),e.checkUserLike()?K.deleteLike(e.cardId).then((function(t){e.removeLike(),e.sumLikes(t)})).catch((function(e){console.error("Ошибка установки лайка: ".concat(e))})):K.putLike(e.cardId).then((function(t){e.like(),e.sumLikes(t)})).catch((function(e){console.error("Ошибка установки лайка: ".concat(e))}))}});return t.createCard()}(e)}},".elements"),W=new S({nameProfileSelector:".profile__title",infoProfileSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),X=new T(".popup_edit-profile",(function(e){X.renderLoading(!0),K.patchUserInfo(e).then((function(e){W.setUserInfo(e),X.close()})).catch((function(e){console.error("Ошибка при отправке данных о пользователе: ".concat(e))})).finally((function(){X.renderLoading(!1)}))})),Y=new T(".popup_cards",(function(e){Y.renderLoading(!0),K.postNewCard(e).then((function(e){console.log(e),Q.addNewItem(e),Y.close()})).catch((function(e){console.error("Ошибка добавления новой карточки: ".concat(e))})).finally((function(){Y.renderLoading(!1)}))})),Z=new A(".popup_image"),ee=new T(".popup_avatar",(function(e){ee.renderLoading(!0),K.patchAvatar(e).then((function(e){console.log(e),W.setUserInfo(e),ee.close()})).catch((function(e){console.error("Ошибка загрузки аватара пользователя: ".concat(e))})).finally((function(){ee.renderLoading(!1)}))})),te=new G(".popup_confirm",(function(e){K.deleteCard(e.cardId).then((function(){e.deleteCard(),te.close()})).catch((function(e){console.error("Ошибка удаления карточки: ".concat(e))}))})),re=new s(e,"form-edit-profile"),ne=new s(e,"form-cards"),oe=new s(e,"form-avatar");re.enableValidation(),ne.enableValidation(),oe.enableValidation(),X.setEventListeners(),Y.setEventListeners(),Z.setEventListeners(),ee.setEventListeners(),te.setEventListeners(),t.addEventListener("click",(function(){X.open();var e=W.getUserInfo();u.value=e.name,c.value=e.about})),n.addEventListener("click",(function(){oe.disableSubmitButton(),ee.open()})),r.addEventListener("click",(function(){ne.disableSubmitButton(),Y.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixrQkF2QmhCLFNBQUNzQyxHQUUvQm5DLEVBQUl5RCxXQUFXdEIsRUFBSy9HLFFBQ2pCMEYsTUFBSyxXQUNKcUIsRUFBS3NCLGFBQ0xuQixHQUFrQnRFLE9BQ3BCLElBQ0NnRSxPQUFNLFNBQUNDLEdBQ05ILFFBQVFJLE1BQU0sNkJBQURySixPQUE4Qm9KLEdBQzdDLEdBQ0osSUFpQk15QixHQUFrQixJQUFJbk0sRUFBY2pCLEVBQWtCLHFCQUN0RHFOLEdBQWUsSUFBSXBNLEVBQWNqQixFQUFrQixjQUNuRHNOLEdBQWlCLElBQUlyTSxFQUFjakIsRUFBa0IsZUFDM0RvTixHQUFnQkcsbUJBQ2hCRixHQUFhRSxtQkFDYkQsR0FBZUMsbUJBSWZqQixFQUFzQmtCLG9CQUN0QlosRUFBZ0JZLG9CQUNoQjFCLEVBQWdCMEIsb0JBQ2hCUixHQUFpQlEsb0JBQ2pCeEIsR0FBa0J3QixvQkFDbEJqTixFQUFrQjhDLGlCQUFrQixTQXZKcEMsV0FDRWlKLEVBQXNCUCxPQUN0QixJQUFNMEIsRUFBY3JDLEVBQVNILGNBQzdCbEssRUFBbUJtQixNQUFRdUwsRUFBWTlJLEtBQ3ZDM0QsRUFBbUJrQixNQUFRdUwsRUFBWXJHLEtBQ3pDLElBbUpBekcsRUFBZ0IwQyxpQkFBa0IsU0FBUyxXQUN6Q2lLLEdBQWU1SixzQkFDZnNKLEdBQWlCakIsTUFDbkIsSUFDQXJMLEVBQWMyQyxpQkFBaUIsU0FBUyxXQUN0Q2dLLEdBQWEzSixzQkFDYmtKLEVBQWdCYixNQUNsQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IHB1c2hraW4gZnJvbSAnLi4vaW1hZ2UvcHVzaGtpbi5wbmcnO1xuaW1wb3J0IGdlcyBmcm9tICcuLi9pbWFnZS9nZXMyLnBuZyc7XG5pbXBvcnQgaGVybWl0YWdlIGZyb20gJy4uL2ltYWdlL0hlcm1pdGFnZS5wbmcnO1xuaW1wb3J0IHJ1c3NraXkgZnJvbSAnLi4vaW1hZ2UvUnVzc2tpeS5wbmcnO1xuaW1wb3J0IGdhcmFnZSBmcm9tICcuLi9pbWFnZS9nYXJhZ2UucG5nJztcbmltcG9ydCBkdm9yRWthdGVyaW5hIGZyb20gJy4uL2ltYWdlL2R2b3JFa2F0ZXJpbmEuanBlZyc7XG5cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICfQk9Cc0JjQmCDQuNC80LXQvdC4INCf0YPRiNC60LjQvdCwJyxcbiAgICBhbHQ6ICfQk9Cc0JjQmCDQuNC80LXQvdC4INCf0YPRiNC60LjQvdCwJyxcbiAgICAvLyBsaW5rOiAnLi9pbWFnZS9wdXNoa2luLnBuZydcbiAgICBsaW5rOiBwdXNoa2luXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JPQrdChIDInLFxuICAgIGFsdDogJ9CT0K3QoSAyJyxcbiAgICAvLyBsaW5rOiAnLi9pbWFnZS9nZXMyLnBuZydcbiAgICBsaW5rOiBnZXNcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQrdGA0LzQuNGC0LDQticsXG4gICAgYWx0OiAn0K3RgNC80LjRgtCw0LYnLFxuICAgIC8vIGxpbms6ICcuL2ltYWdlL0hlcm1pdGFnZS5wbmcnXG4gICAgbGluazogaGVybWl0YWdlXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KDRg9GB0YHQutC40Lkg0JzRg9C30LXQuScsXG4gICAgYWx0OiAn0KDRg9GB0YHQutC40Lkg0LzRg9C30LXQuScsXG4gICAgLy8gbGluazogJy4vaW1hZ2UvUnVzc2tpeS5wbmcnXG4gICAgbGluazogcnVzc2tpeVxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CT0LDRgNCw0LYnLFxuICAgIGFsdDogJ9CT0LDRgNCw0LYnLFxuICAgIC8vIGxpbms6ICcuL2ltYWdlL2dhcmFnZS5wbmcnXG4gICAgbGluazogZ2FyYWdlXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JXQutCw0YLQtdGA0LjQvdC40YHQutC40Lkg0JTQstC+0YDQtdGGJyxcbiAgICBhbHQ6ICfQldC60LDRgtC10YDQuNC90LjRgdC60LjQuSDQlNCy0L7RgNC10YYnLFxuICAgIC8vIGxpbms6ICcuL2ltYWdlL2R2b3JFa2F0ZXJpbmEuanBlZydcbiAgICBsaW5rOiBkdm9yRWthdGVyaW5hXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59O1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGVuJyk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LmZvcm1zWydmb3JtLWVkaXQtcHJvZmlsZSddO1xuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUNhcmQgPSBkb2N1bWVudC5mb3Jtc1snZm9ybS1jYXJkcyddO1xuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IGRvY3VtZW50LmZvcm1zWydmb3JtLWF2YXRhciddO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW5wdXRVc2VyTmFtZSA9IHBvcHVwRm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbnB1dFVzZXJJbmZvID0gcG9wdXBGb3JtRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2luZm8nKTtcbmV4cG9ydCBjb25zdCBwb3B1cElucHV0VXNlckF2YXRhciA9IHBvcHVwRm9ybUF2YXRhci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyLWxpbmsnKTtcblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LmZvcm1zW2Zvcm1FbGVtZW50XTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cbiAgXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkKGlucHV0KSB7XG4gICAgICBpZiAoIShpbnB1dC52YWxpZGl0eS52YWxpZCkpIHtcbiAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZChpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9hY3RpdmVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvci5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9oYXNJbnB1dEludmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnB1dEludmFsaWQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCB1c2VySWQsIHtoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmQsIGhhbmRsZUxpa2VCdXR0b259KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuY2FyZElkID0gZGF0YS5faWQ7IC8vaWQg0LrQsNGA0YLQvtGH0LrQuFxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlczsgLy8g0YHQsi3QstC+INC60LDRgNGC0L7Rh9C60LgsINGB0L7QtNC10YDQttCw0YnQtdC1INC80LDRgdGB0LjQsiDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQv9C+0YHRgtCw0LLQuNCy0YjQuNGFINC70LDQudC6XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkOyAvLyBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkOyAvLyDQvNC+0LkgaWRcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XG4gIH1cblxuICBfZ2V0VGVtcGxhdGVDYXJkKCkge1xuICAgIGNvbnN0IGNhcmRzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgXG4gICAgcmV0dXJuIGNhcmRzVGVtcGxhdGU7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2l0ZW0gPSB0aGlzLl9nZXRUZW1wbGF0ZUNhcmQoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIC8vIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2xpbmspO1xuICAgIC8vIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX25hbWUpO1xuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50RGVsZXRlID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fY2FyZC1kZWxldGUnKTtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlcycpO1xuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIC8vINGD0YHRgtCw0L3QvtCy0LrQsCDQutC+0YDQt9C40L3RiyDQvdCwINC80L7QuNGFINC60LDRgNGC0L7Rh9C60LDRhVxuICAgIGlmICh0aGlzLl9vd25lcklkICE9IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fY2FyZEVsZW1lbnREZWxldGUucmVtb3ZlKClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaGVja1VzZXJMaWtlKCkpIHtcbiAgICAgIHRoaXMubGlrZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlTGlrZSgpXG4gICAgfVxuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgIFxuICAgIHJldHVybiB0aGlzLl9pdGVtO1xuICB9XG5cbiAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQu9Cw0LnQutCwXG4gIGNoZWNrVXNlckxpa2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2VzKSA9PiBsaWtlcy5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG4gIH0gXG5cbiAgc3VtTGlrZXMobGlrZXMpIHtcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSBsaWtlcy5saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcy5saWtlcztcbiAgfVxuXG4gIGxpa2UoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZV9hY3RpdmUnLCB0cnVlKTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnLCB0cnVlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5faXRlbS5yZW1vdmUoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIC8vIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcy5fY2FyZElkKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcyk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9XG4gIFxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxuXG4gIGFkZE5ld0l0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe25hbWVQcm9maWxlU2VsZWN0b3IsIGluZm9Qcm9maWxlU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVQcm9maWxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJQcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluZm9Qcm9maWxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgcmV0dXJuIHtcbiAgICBuYW1lOiB0aGlzLl91c2VyTmFtZVRpdGxlLnRleHRDb250ZW50LFxuICAgIGFib3V0OiB0aGlzLl91c2VyUHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50XG4gICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3VzZXJOYW1lVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fdXNlclByb2ZpbGVTdWJ0aXRsZS50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgfVxufSIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKTtcbiAgfVxuXG4gICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICB9XG5cbiAgIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICB9XG4gICBcbiAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIC8vIGNvbnN0IHBvcHVwT3BlbmVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xuICAgICAgLy8gdGhpcy5jbG9zZShwb3B1cE9wZW5lZCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICAgfVxuXG4gICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICB9XG5cbiAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgLy8gdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG4gIFxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VGdWxsID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1mdWxsJyk7XG4gICAgdGhpcy5faGVhZGluZ0Z1bGwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlX2ltYWdlLWZ1bGwnKTtcbiAgfVxuXG4gIG9wZW4oaXRlbSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWFnZUZ1bGwuc3JjID0gaXRlbS5saW5rO1xuICAgIHRoaXMuX2ltYWdlRnVsbC5hbHQgPSBpdGVtLm5hbWU7XG4gICAgdGhpcy5faGVhZGluZ0Z1bGwudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHBvcHVwQ29uZmlybUZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIG9wZW4oY2FyZHMpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmRzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkKTtcbiAgICB9KVxuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCB7XG4gIHZhbGlkYXRpb25Db25maWcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBjYXJkQWRkQnV0dG9uLFxuICBwb3B1cElucHV0VXNlck5hbWUsXG4gIHBvcHVwSW5wdXRVc2VySW5mbyxcbiAgcG9wdXBJbnB1dFVzZXJBdmF0YXIsXG4gIGF2YXRhckFkZEJ1dHRvbiwgXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJ1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBwb3B1cENvbmZpcm1Gb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuXG5sZXQgdXNlcklkO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgdXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02NScsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnZWI4OGE3ODQtNWFiZS00NTEzLTgxMTctMzc3YWRhZmE5ZGRjJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG4vLyDQn9C+0LvRg9GH0LjRgtGMINC00LDQvdC90YvQtSDQv9GA0L7RhNC40LvRjyDRgSDRgdC10YDQstC10YDQsCwg0LzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0YEg0LrQsNGA0YLQvtGH0LrQsNC80Lgg0LggINC+0YLRgNC40YHQvtCy0LrQsCDQvNCw0YHRgdC40LLQsCDQutCw0YDRgtC+0YfQtdC6XG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRDYXJkcygpXSlcbiAgLnRoZW4oKFtkYXRhVXNlciwgY2FyZHNdKSA9PiB7XG4gICAgdXNlcklkID0gZGF0YVVzZXIuX2lkXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YVVzZXIpXG4gICAgc2VjdGlvbkNhcmRzLnJlbmRlckl0ZW1zKGNhcmRzKVxuICAgIGNvbnNvbGUubG9nKGRhdGFVc2VyLl9pZCwgY2FyZHMpXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwICR7ZXJyfWApXG4gIH0pXG5cbi8vICAgICAgICAgICAgICAg0KDQldCU0JDQmtCi0JjQoNCe0JLQkNCd0JjQlSDQn9Cg0J7QpNCY0JvQryBcblxuXG4vLyDRhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINGE0L7RgNC80YsgXCLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFwiXG5mdW5jdGlvbiBoYW5kbGVPcGVuUHJvZmlsZUZvcm0oKSB7XG4gIHBvcHVwRWRpdFByb2ZpbGVDbGFzcy5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcG9wdXBJbnB1dFVzZXJOYW1lLnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcbiAgcG9wdXBJbnB1dFVzZXJJbmZvLnZhbHVlID0gcHJvZmlsZUluZm8uYWJvdXQ7XG59XG5cbi8vINGE0YPQvdC60YbQuNGPINGB0LDQsdC80LjRgtCwINGE0L7RgNC80YsgXCLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFwiXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRQcm9maWxlRm9ybShmb3JtVmFsdWVzKSB7XG4gIHBvcHVwRWRpdFByb2ZpbGVDbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpXG4gIGFwaS5wYXRjaFVzZXJJbmZvKGZvcm1WYWx1ZXMpXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICAvLyBwb3B1cEVkaXRQcm9maWxlQ2xhc3MucmVuZGVyTG9hZGluZyh0cnVlKVxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpXG4gICAgICBwb3B1cEVkaXRQcm9maWxlQ2xhc3MuY2xvc2UoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDQtNCw0L3QvdGL0YUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1OiAke2Vycn1gKVxuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZUNsYXNzLnJlbmRlckxvYWRpbmcoZmFsc2UpXG4gICAgfSlcbn1cblxuLy8g0YTRg9C90LrRhtC40Y8g0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LzRiyBcItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINCw0LLQsNGC0LDRgFwiXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRBdmF0YXJGb3JtKGZvcm1WYWx1ZXMpIHtcbiAgcG9wdXBBdmF0YXJDbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkucGF0Y2hBdmF0YXIoZm9ybVZhbHVlcylcbiAgICAudGhlbigodXNlckF2YXRhcikgPT4ge1xuICAgICAgY29uc29sZS5sb2codXNlckF2YXRhcilcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJBdmF0YXIpXG4gICAgICBwb3B1cEF2YXRhckNsYXNzLmNsb3NlKClcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86ICR7ZXJyfWApXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEF2YXRhckNsYXNzLnJlbmRlckxvYWRpbmcoZmFsc2UpXG4gICAgfSlcbn1cblxuLy8gICAgICAgICAgICAgICAgINCa0JDQoNCi0J7Qp9Ca0JggXG5cbi8vINGE0YPQvdC60YbQuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY3JlYXRlTmV3Q2FyZCA9IChjYXJkcykgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZHMsICcuY2FyZHMnLCB1c2VySWQsIHtcbiAgICBcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgIHBvcHVwSW1hZ2VDbGFzcy5vcGVuKGNhcmRzKVxuICAgIH0sXG5cbiAgICBoYW5kbGVEZWxldGVDYXJkOiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhjYXJkKTtcbiAgICAgIHBvcHVwQ29uZmlybUNsYXNzLm9wZW4oY2FyZCk7XG4gICAgfSxcblxuICAgIGhhbmRsZUxpa2VCdXR0b246IChjYXJkKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhjYXJkKTtcbiAgICAgIGlmICghY2FyZC5jaGVja1VzZXJMaWtlKCkpIHtcbiAgICAgICAgYXBpLnB1dExpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKGxpa2VzKSA9PiB7XG4gICAgICAgICAgICBjYXJkLmxpa2UoKTtcbiAgICAgICAgICAgIGNhcmQuc3VtTGlrZXMobGlrZXMpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINGD0YHRgtCw0L3QvtCy0LrQuCDQu9Cw0LnQutCwOiAke2Vycn1gKVxuICAgICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmQuY2FyZElkKVxuICAgICAgICAgIC50aGVuKChsaWtlcykgPT4ge1xuICAgICAgICAgICAgY2FyZC5yZW1vdmVMaWtlKClcbiAgICAgICAgICAgIGNhcmQuc3VtTGlrZXMobGlrZXMpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINGD0YHRgtCw0L3QvtCy0LrQuCDQu9Cw0LnQutCwOiAke2Vycn1gKVxuICAgICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGNhcmRSZW5kZXIgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRSZW5kZXI7XG59O1xuXG5cbi8vINC60LvQsNGB0YEg0LTQu9GPINC/0LXRgNC10LHQvtGA0LAg0LzQsNGB0YHQuNCy0LAg0LTQsNC90L3Ri9GFINC4INCy0YHRgtCw0LLQutCwINGN0LvQtdC80LXQvdGC0L7QsiDQsiDRgNCw0LfQvNC10YLQutGDXG5jb25zdCBzZWN0aW9uQ2FyZHMgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoY2FyZHMpID0+IGNyZWF0ZU5ld0NhcmQoY2FyZHMpXG59LCAnLmVsZW1lbnRzJyk7XG5cblxuLy8g0YTRg9C90LrRhtC40Y8g0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LzRiyBcItCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxuZnVuY3Rpb24gaGFuZGxlU3VibWl0Q2FyZHNGb3JtKGZvcm1WYWx1ZXMpIHtcbiAgcG9wdXBDYXJkc0NsYXNzLnJlbmRlckxvYWRpbmcodHJ1ZSlcbiAgYXBpLnBvc3ROZXdDYXJkKGZvcm1WYWx1ZXMpXG4gICAgLnRoZW4oKGRhdGFDYXJkKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhQ2FyZClcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGFDYXJkLmxpa2VzKVxuICAgICAgc2VjdGlvbkNhcmRzLmFkZE5ld0l0ZW0oZGF0YUNhcmQpXG4gICAgICBwb3B1cENhcmRzQ2xhc3MuY2xvc2UoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lg6ICR7ZXJyfWApXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cENhcmRzQ2xhc3MucmVuZGVyTG9hZGluZyhmYWxzZSlcbiAgICB9KVxufVxuXG4vLyDRhNGD0L3QutGG0LjRjyDRgdCw0LHQvNC40YLQsCDRhNC+0YDQvNGLINGD0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCBcbmNvbnN0IGhhbmRsZVN1Ym1pdENvbmZpcm1Gb3JtID0gKGNhcmQpID0+IHtcbiAgLy8gY29uc29sZS5sb2coY2FyZC5fY2FyZElkKTtcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5jYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICBwb3B1cENvbmZpcm1DbGFzcy5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lg6ICR7ZXJyfWApXG4gICAgfSlcbn1cblxuLy8gICAgICAgICAgICAgICDQrdCa0JfQldCc0J/Qm9Cv0KDQqyDQmtCb0JDQodCh0J7QkiDQn9Ce0J/QkNCfICBcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lUHJvZmlsZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgaW5mb1Byb2ZpbGVTZWxlY3RvcjogJy5wcm9maWxlX19zdWJ0aXRsZScsXG4gIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pO1xuY29uc3QgcG9wdXBFZGl0UHJvZmlsZUNsYXNzID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9lZGl0LXByb2ZpbGUnLCBoYW5kbGVTdWJtaXRQcm9maWxlRm9ybSk7XG5jb25zdCBwb3B1cENhcmRzQ2xhc3MgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2NhcmRzJywgaGFuZGxlU3VibWl0Q2FyZHNGb3JtKTtcbmNvbnN0IHBvcHVwSW1hZ2VDbGFzcyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX2ltYWdlJyk7XG5jb25zdCBwb3B1cEF2YXRhckNsYXNzID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9hdmF0YXInLCBoYW5kbGVTdWJtaXRBdmF0YXJGb3JtKTtcbmNvbnN0IHBvcHVwQ29uZmlybUNsYXNzID0gbmV3IHBvcHVwQ29uZmlybUZvcm0gKCcucG9wdXBfY29uZmlybScsIGhhbmRsZVN1Ym1pdENvbmZpcm1Gb3JtKTtcblxuLy8gICAgICAgICAgICAgICAgINCS0JDQm9CY0JTQkNCm0JjQryDQpNCe0KDQnCBcblxuY29uc3QgcHJvZmlsZVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgJ2Zvcm0tZWRpdC1wcm9maWxlJyk7XG5jb25zdCBjYXJkVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCAnZm9ybS1jYXJkcycpO1xuY29uc3QgYXZhdGFyVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCAnZm9ybS1hdmF0YXInKTtcbnByb2ZpbGVWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5jYXJkVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyAgICAgICAgICAgICAgICDQodCb0KPQqNCQ0KLQldCb0Jgg0KHQntCR0KvQotCY0JkgICAgICAgICAgIFxuXG5wb3B1cEVkaXRQcm9maWxlQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQ2FyZHNDbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBJbWFnZUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEF2YXRhckNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cENvbmZpcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAoJ2NsaWNrJywgaGFuZGxlT3BlblByb2ZpbGVGb3JtKTtcbmF2YXRhckFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyICgnY2xpY2snLCAoKSA9PiB7XG4gIGF2YXRhclZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgcG9wdXBBdmF0YXJDbGFzcy5vcGVuKClcbn0pO1xuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY2FyZFZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgcG9wdXBDYXJkc0NsYXNzLm9wZW4oKTtcbn0pO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Ioe3VybCwgaGVhZGVyc30pIHtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICAgIC8v0L7RgtCy0LXRgiDQvtGCINGB0LXRgNCy0LXRgNCwIFxuICBfZ2V0UmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0KfRgtC+LdGC0L4g0L/QvtGI0LvQviDQvdC1INGC0LDQujogJHtyZXMuc3RhdHVzfWApO1xuICAgIFxuICB9XG5cbiAgLy/Qv9C+0LvRg9GH0LjRgtGMINC80LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyINGBINC60LDRgNGC0L7Rh9C60LDQvNC4XG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cblxuICAvLyDQv9C+0LvRg9GH0LjRgtGMINC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cblxuICAvLyDQvtGC0L/RgNCw0LLQuNGC0Ywg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gIHBhdGNoVXNlckluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCwgXG4gICAgICB9KSAgXG4gICAgfSkgXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cbi8vINC00L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCBcbiAgIHBvc3ROZXdDYXJkKHtuYW1lLCBsaW5rfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZSlcbiAgfVxuXG4gIC8vINC+0LHQvdC+0LLQuNGC0Ywg0LDQstCw0YLQsNGAXG4gIHBhdGNoQXZhdGFyKHthdmF0YXJ9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cblxuICAvLyDRg9GB0YLQsNC90L7QstC60LAg0LvQsNC50LrQsFxuICBwdXRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cblxuICAvLyDRg9C00LDQu9C10L3QuNC1INC70LDQudC60LBcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKVxuICB9XG5cbiAgLy8g0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4IFxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FyZEFkZEJ1dHRvbiIsImF2YXRhckFkZEJ1dHRvbiIsInBvcHVwRm9ybUVkaXRQcm9maWxlIiwiZm9ybXMiLCJwb3B1cEZvcm1BdmF0YXIiLCJwb3B1cElucHV0VXNlck5hbWUiLCJwb3B1cElucHV0VXNlckluZm8iLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9mb3JtU2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJrZXkiLCJ2YWx1ZSIsIl9zZXRFdmVudExpc3RlbmVyIiwiaW5wdXQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RoaXMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWQiLCJkaXNhYmxlZCIsInNvbWUiLCJfaGFzSW5wdXRJbnZhbGlkIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9hY3RpdmVTdWJtaXRCdXR0b24iLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJ1c2VySWQiLCJfcmVmIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VCdXR0b24iLCJfY2FyZExpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9jYXJkRWxlbWVudERlbGV0ZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJjYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2l0ZW0iLCJfZ2V0VGVtcGxhdGVDYXJkIiwic3JjIiwiYWx0IiwiX2NhcmRMaWtlcyIsImxlbmd0aCIsImNoZWNrVXNlckxpa2UiLCJsaWtlIiwicmVtb3ZlTGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90aGlzMiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lUHJvZmlsZVNlbGVjdG9yIiwiaW5mb1Byb2ZpbGVTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lVGl0bGUiLCJfdXNlclByb2ZpbGVTdWJ0aXRsZSIsIl91c2VyQXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfZGVmaW5lUHJvcGVydHkiLCJldnQiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJoYW5kbGVGb3JtU3VibWl0IiwiY2FsbCIsIl9wb3B1cEZvcm0iLCJfYnV0dG9uU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlzTG9hZGluZyIsIl90aGlzMyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VGdWxsIiwiX2hlYWRpbmdGdWxsIiwicG9wdXBDb25maXJtRm9ybSIsImNhcmRzIiwiX2NhcmQiLCJhcGkiLCJBcGkiLCJ1cmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9nZXRSZXNwb25zZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3JlZjIiLCJfcmVmMyIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRzIiwiZGF0YVVzZXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2VjdGlvbkNhcmRzIiwicmVuZGVySXRlbXMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImNhcmQiLCJwb3B1cEltYWdlQ2xhc3MiLCJvcGVuIiwicG9wdXBDb25maXJtQ2xhc3MiLCJkZWxldGVMaWtlIiwic3VtTGlrZXMiLCJwdXRMaWtlIiwiY3JlYXRlQ2FyZCIsImNyZWF0ZU5ld0NhcmQiLCJwb3B1cEVkaXRQcm9maWxlQ2xhc3MiLCJmb3JtVmFsdWVzIiwicmVuZGVyTG9hZGluZyIsInBhdGNoVXNlckluZm8iLCJ1c2VyRGF0YSIsImZpbmFsbHkiLCJwb3B1cENhcmRzQ2xhc3MiLCJwb3N0TmV3Q2FyZCIsImRhdGFDYXJkIiwiYWRkTmV3SXRlbSIsInBvcHVwQXZhdGFyQ2xhc3MiLCJwYXRjaEF2YXRhciIsInVzZXJBdmF0YXIiLCJkZWxldGVDYXJkIiwicHJvZmlsZVZhbGlkYXRlIiwiY2FyZFZhbGlkYXRlIiwiYXZhdGFyVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwcm9maWxlSW5mbyJdLCJzb3VyY2VSb290IjoiIn0=